(this["webpackJsonpmovies-explorer-frontend"]=this["webpackJsonpmovies-explorer-frontend"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e){e.exports=JSON.parse('{"a":{"name":"Art Ginzburg","email":"art.ginzburg@ya.ru","url":"https://github.com/artginzburg"},"c":"https://github.com/artginzburg-learning/movies-explorer-frontend","b":"https://deeplomka.nomoredomains.club"}')},,,,,,,,,,,,,,,,function(e,t,n){},,,function(e,t,n){},function(e,t,n){},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(17),s=n.n(r),i=(n(32),n(4)),o=n(9),l=n.n(o),u=n(25),j=n(11),d=n(3),b=n(5),h="api.nomoreparties.co",m="/",O="/movies",f="/saved-movies",_="/signin",v="/signup",p="/profile",g={title:"Movies Explorer"},x={title:"\u0424\u0438\u043b\u044c\u043c\u044b"},N={title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"},k={title:"\u0412\u0445\u043e\u0434",action:"\u0412\u043e\u0439\u0442\u0438"},C={title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",action:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"},w={title:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"};var y=n(12),S=n(13),E=n(20),I=n(19),F=n(16),D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(y.a)(this,e),this._handleFetch=function(e){return e.ok?e.json():Promise.reject(e.statusText)},this._handleData=function(e){var t;return null!==(t=e.data)&&void 0!==t?t:e},this._baseUrl=t.baseUrl,this._headers=t.headers,this._credentials=t.credentials}return Object(S.a)(e,[{key:"_customFetch",value:function(e,t,n){var a,c={headers:null!==(a=this._headers)&&void 0!==a?a:{},credentials:this._credentials};return t&&"GET"!==t&&(c.method=t,"DELETE"!==t&&(c.headers["Content-Type"]="application/json")),n&&(c.body=JSON.stringify(n)),fetch("".concat(this._baseUrl).concat(e),c).then(this._handleFetch).then(this._handleData)}}]),e}(),R=new URL(F.b);R.hostname="api.".concat(R.hostname);var T={host:R,endpoints:{register:"signup",login:"signin",logout:"signout",user:"users/me",movies:"movies"}},L=new(function(e){Object(E.a)(n,e);var t=Object(I.a)(n);function n(){var e;Object(y.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).saveMovie=function(t){return e._customFetch(T.endpoints.movies,"POST",t)},e.deleteMovie=function(t){return e._customFetch("".concat(T.endpoints.movies,"/").concat(t),"DELETE")},e}return Object(S.a)(n,[{key:"register",value:function(e,t,n){return this._customFetch(T.endpoints.register,"POST",{name:n,password:t,email:e})}},{key:"login",value:function(e,t){return this._customFetch(T.endpoints.login,"POST",{password:t,email:e})}},{key:"logout",value:function(){return this._customFetch(T.endpoints.logout,"DELETE")}},{key:"getUserInfo",value:function(){return this._customFetch(T.endpoints.user)}},{key:"updateUserInfo",value:function(e){var t=e.name,n=e.email;return this._customFetch(T.endpoints.user,"PATCH",{name:t,email:n})}},{key:"getMovies",value:function(){return this._customFetch(T.endpoints.movies)}}]),n}(D))({baseUrl:T.host,credentials:"include"});function U(e,t){var n=Object(a.useState)((function(){try{var n=localStorage[e];return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),c=Object(d.a)(n,2),r=c[0],s=c[1],i=Object(a.useCallback)((function(t){localStorage[e]=JSON.stringify(t),s(t)}),[e]);return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,c=Object(a.useRef)();Object(a.useEffect)((function(){c.current=t}),[t]),Object(a.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return c.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])}("storage",Object(a.useCallback)((function(n){n.key===e&&s(n.newValue?JSON.parse(n.newValue):t)}),[e,t])),[r,i]}var M=n(2),P=n(0),z={name:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439",about:"\u041f\u043e\u0442\u0435\u0440\u044f\u043d\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c"},J=c.a.createContext(),A=c.a.createContext();function q(e){var t=e.state,n=e.dispatch,a=e.children;return Object(P.jsx)(J.Provider,{value:t,children:Object(P.jsx)(A.Provider,{value:n,children:a})})}function B(){var e=c.a.useContext(J);if(void 0===e)throw new Error("useCurrentUser must be used within a CurrentUserProvider");return e}function G(e,t){return JSON.stringify(e)===JSON.stringify(t)}function H(e,t,n,a){return V.apply(this,arguments)}function V(){return(V=Object(j.a)(l.a.mark((function e(t,n,a,c){var r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(M.a)(Object(M.a)({},n),a),t(r),e.prev=2,e.next=5,L[c](a);case 5:return s=e.sent,G(r,s)||t(s),e.abrupt("return",s);case 10:throw e.prev=10,e.t0=e.catch(2),t(n),console.log("Couldnt update user information on the server",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var Y=n(10),K={},W=!0;function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(K),i=Object(d.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)(W),j=Object(d.a)(u,2),b=j[0],h=j[1];function m(t,n){r((function(a){var c=Object(M.a)(Object(M.a)({},a),{},Object(Y.a)({},t,n));return JSON.stringify(Object(M.a)(Object(M.a)({},e),c))===JSON.stringify(e)&&h(!0),c}))}function O(e,t){l((function(n){return Object(M.a)(Object(M.a)({},n),{},Object(Y.a)({},e,t))}))}var f=Object(a.useCallback)((function(t,n){r(null!==n&&void 0!==n?n:e),l(K),h(W)}),[e]);return{registerForm:function(){return{isSubmitDisabled:b,onReset:f}},register:function(e){var t;return{value:null!==(t=c[e])&&void 0!==t?t:"",onChange:function(t){var n=t.currentTarget,a=n.value,c=n.validationMessage;m(e,a),O(e,a.length?c:"");var r=n.closest("form").checkValidity();h(!r)},validationMessage:o[e],name:e}},reset:f,getData:function(){return c},isInvalid:b}}var Q=g.title,X=function(e){Object(a.useEffect)((function(){document.title=e?"".concat(e," \xb7 ").concat(Q):Q}),[e])},$=n(6),ee=n.p+"static/media/logo.1edc39b5.svg",te="form__input",ne="form__button",ae=(n(35),["onSubmit"]),ce=Object(a.memo)((function(e){var t=e.onSubmit,n=Object($.a)(e,ae),c=Object(a.useCallback)((function(e){t&&(e.preventDefault(),t(e))}),[t]);return Object(P.jsx)("form",Object(M.a)(Object(M.a)({action:"#",onSubmit:c,className:"form"},n),{},{children:n.children}))})),re=function(e){return e.filter(Boolean).join(" ")},se=function(e){return{className:re(e)}},ie=(n(36),["isFocused","validationMessage","labelTitle"]),oe="text",le=!0,ue=2,je=Object(a.forwardRef)((function(e,t){var n,c,r,s=e.isFocused,i=e.validationMessage,o=(e.labelTitle,Object($.a)(e,ie)),l=null!==t&&void 0!==t?t:Object(a.createRef)(),u=null!==(n=o.type)&&void 0!==n?n:oe,j=null!==(c=o.required)&&void 0!==c?c:le,d=u===oe?ue:null,b={type:u,minLength:null!==(r=o.minLength)&&void 0!==r?r:d,required:j,ref:l};return Object(a.useEffect)((function(){s&&l&&l.current&&l.current.parentElement!==document.activeElement.parentElement&&setTimeout((function(){l&&l.current&&l.current.focus()}),50)}),[s,l]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("input",Object(M.a)(Object(M.a)(Object(M.a)({},o),se([te,i&&"".concat(te,"_type_error"),o.className])),b)),Object(P.jsx)("p",Object(M.a)(Object(M.a)({},se(["".concat(te,"-error"),"".concat(o.className,"-error"),i&&"".concat(te,"-error_visible")])),{},{id:"".concat(o.id,"-error"),children:i}))]})})),de=["form","additionalInput"],be={autoCorrect:"off",spellCheck:!1,className:"".concat(te,"_theme_dark")},he="email",me="password",Oe=Object(a.memo)((function(e){var t=e.form,n=e.additionalInput,c=Object($.a)(e,de),r=Object(a.useState)(!1),s=Object(d.a)(r,2),o=s[0],l=s[1],u=o?"".concat(c.buttonSavingTitle,"..."):c.buttonTitle;return Object(P.jsxs)("div",{className:"auth",children:[Object(P.jsx)(i.b,{to:m,className:"logo auth__logo",children:Object(P.jsx)("img",{className:"logo__img",alt:g.title,src:ee})}),Object(P.jsx)("h2",{className:"auth__title",children:c.title}),Object(P.jsxs)(ce,{onSubmit:function(e){l(!0);var n=t.getData(),a=n.name,r=n.email,s=n.password;c.handleSubmit(e,r,s,a).finally((function(){l(!1)}))},onReset:t.reset,children:[Object(P.jsxs)("div",{className:"form__container",children:[n&&Object(P.jsxs)("label",{children:[Object(P.jsx)("p",{className:"auth__label",children:n.title}),Object(P.jsx)(je,Object(M.a)(Object(M.a)(Object(M.a)({},be),{},{autoFocus:!0},t.register(n.name)),{},{id:n.name,type:n.name,autoComplete:n.name},n.props))]}),Object(P.jsxs)("label",{children:[Object(P.jsx)("p",{className:"auth__label",children:"E-mail"}),Object(P.jsx)(je,Object(M.a)(Object(M.a)(Object(M.a)({},be),{},{autoFocus:!n},t.register(he)),{},{id:he,type:he,autoComplete:he,placeholder:"mail@example.com"}))]}),Object(P.jsxs)("label",{children:[Object(P.jsx)("p",{className:"auth__label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(P.jsx)(je,Object(M.a)(Object(M.a)(Object(M.a)({},be),t.register(me)),{},{type:me,id:c.passwordAutocomplete,autoComplete:c.passwordAutocomplete,placeholder:"n4Gorshke7idelKING"}))]})]}),Object(P.jsx)("button",{type:"submit",disabled:t.isInvalid||o,className:"auth__button ".concat(ne," ").concat(ne,"_theme_dark"),children:u})]}),Object(P.jsxs)("p",{className:"auth__signin",children:["".concat(c.otherOption.tagline," "),Object(P.jsx)(i.b,{to:c.otherOption.path,className:"auth__signin-link",children:c.otherOption.title})]})]})})),fe={passwordAutocomplete:"current-password",title:"\u0420\u0430\u0434\u044b \u0432\u0438\u0434\u0435\u0442\u044c!",buttonTitle:k.action,buttonSavingTitle:k.title,otherOption:{tagline:"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",path:v,title:C.title}},_e=Object(a.memo)((function(e){return X(k.title),Object(P.jsx)(Oe,Object(M.a)(Object(M.a)({},e),fe))})),ve={passwordAutocomplete:"new-password",title:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!",buttonTitle:C.action,buttonSavingTitle:C.title,otherOption:{tagline:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",path:_,title:k.action}},pe=Object(a.memo)((function(e){return X(C.title),Object(P.jsx)(Oe,Object(M.a)(Object(M.a)(Object(M.a)({},e),ve),{},{additionalInput:{title:"\u0418\u043c\u044f",name:"name",props:{placeholder:"\u0410\u0440\u0442",pattern:"[A-Za-z\u0410-\u042f\u0401\u0430-\u044f\u0451 -]+"}}}))})),ge=(n(45),Object(a.memo)((function(e){var t,n,a=Z({email:null!==(n="email",t=localStorage[n]&&atob(JSON.parse(localStorage[n])))&&void 0!==t?t:"",password:""});return e.loggedIn?Object(P.jsx)(b.a,{to:m}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(b.b,{path:_,children:Object(P.jsx)(_e,{handleSubmit:e.handleLogin,form:a})}),Object(P.jsx)(b.b,{path:v,children:Object(P.jsx)(pe,{handleSubmit:e.handleRegister,form:a})})]})}))),xe=(n(46),(new Date).getFullYear());var Ne=function(){return Object(P.jsxs)("footer",{className:"footer",children:[Object(P.jsx)("h2",{className:"footer__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c \u0445 BeatFilm."}),Object(P.jsxs)("div",{className:"footer__copyright",children:[Object(P.jsxs)("div",{className:"footer__links",children:[Object(P.jsx)("a",{className:"footer__link",href:"https://practicum.yandex.ru",target:"_blank",rel:"noreferrer",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"}),Object(P.jsx)("a",{className:"footer__link",href:F.c,target:"_blank",rel:"noreferrer",children:"GitHub"}),Object(P.jsx)("a",{className:"footer__link",href:"https://t.me/artginzburg",target:"_blank",rel:"noreferrer",children:"Telegram"})]}),Object(P.jsxs)("a",{className:"footer__link footer__link-copyright",href:F.a.url,target:"_blank",rel:"noreferrer",children:["\xa9 ",xe]})]})]})},ke=(n(47),document.getElementById("modal-root"));function Ce(e){function t(t){t.target.className.includes("active")||e.onClose()}return Object(r.createPortal)(Object(P.jsx)("section",{onClick:e.onClose,className:"navigation",children:Object(P.jsxs)("nav",{className:"navigation__container",children:[Object(P.jsx)("button",{onClick:e.onClose,type:"button",className:"navigation__close-button"}),Object(P.jsxs)("ul",{className:"navigation__list",children:[Object(P.jsx)("li",{className:"navigation__list-item",children:Object(P.jsx)(i.c,{exact:!0,to:m,className:"navigation__link",activeClassName:"navigation__link_active",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(P.jsx)("li",{className:"navigation__list-item",children:Object(P.jsx)(i.c,{to:O,className:"navigation__link",activeClassName:"navigation__link_active",onClick:t,children:x.title})}),Object(P.jsx)("li",{className:"navigation__list-item",children:Object(P.jsx)(i.c,{to:f,className:"navigation__link",activeClassName:"navigation__link_active",onClick:t,children:N.title})})]}),Object(P.jsx)(i.b,{to:p,className:"profile-button navigation__profile-button",children:w.title})]})}),ke)}n(48);var we=function(e){var t=e.loggedIn,n=Object(a.useState)(!1),c=Object(d.a)(n,2),r=c[0],s=c[1],o=Object(a.useCallback)((function(){s(!0)}),[]),l=Object(a.useCallback)((function(e){e&&e.target!==e.currentTarget||s(!1)}),[]);return Object(P.jsxs)("header",{className:"header",children:[Object(P.jsxs)("nav",{className:"header__links",children:[Object(P.jsx)(i.b,{to:m,className:"logo header__logo",children:Object(P.jsx)("img",{className:"logo__img",alt:g.title,src:ee})}),t&&Object(P.jsxs)("div",{className:"header__navigation",children:[Object(P.jsx)(i.c,{activeClassName:"header__navigation-link_active",to:O,className:"header__navigation-link",children:x.title}),Object(P.jsx)(i.c,{activeClassName:"header__navigation-link_active",to:f,className:"header__navigation-link",children:N.title})]})]}),Object(P.jsx)("div",{className:"header__profile",children:t?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(i.b,{to:p,className:"profile-button header__profile-button",children:w.title}),Object(P.jsx)("button",{type:"button",onClick:o,className:"header__burger"}),r&&Object(P.jsx)(Ce,{onClose:l})]}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(i.b,{to:v,className:"header__profile-link",children:C.title}),Object(P.jsx)(i.b,{to:_,className:"header__profile-link",children:k.action})]})})]})},ye=n.p+"static/media/student.22e6909b.jpg";n(49);var Se=function(e){var t=new Date,n=t.getFullYear()-e.getFullYear(),a=t.getMonth()-e.getMonth();return(a<0||0===a&&t.getDate()<e.getDate())&&n--,n}(new Date(2002,3,25));var Ee=function(){return Object(P.jsx)("section",{className:"aboutme",id:"student",children:Object(P.jsxs)("article",{children:[Object(P.jsx)("h2",{className:"aboutme__title",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),Object(P.jsxs)("div",{className:"aboutme__content",children:[Object(P.jsx)("img",{className:"aboutme__image",src:ye,alt:"\u0410\u0440\u0442 \u0413\u0438\u043d\u0437\u0431\u0443\u0440\u0433"}),Object(P.jsxs)("div",{className:"aboutme__student",children:[Object(P.jsxs)("div",{className:"aboutme__student-article",children:[Object(P.jsx)("h3",{className:"aboutme__heading",children:"\u0410\u0440\u0442\u0443\u0440"}),Object(P.jsxs)("p",{className:"aboutme__subheading",children:["\u0424\u0440\u043e\u043d\u0442\u0435\u043d\u0434-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, ",Se," \u043b\u0435\u0442"]}),Object(P.jsx)("p",{className:"aboutme__text",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam accumsan volutpat sollicitudin. Nullam eget mauris ante. Nullam id mattis sapien. Praesent mollis, diam eget dictum semper, velit diam ultrices ante, vitae condimentum lorem eros vitae tortor. Etiam elit leo, hendrerit et nisi a, aliquam suscipit tellus. Suspendisse pretium tellus ac erat ultrices viverra. Donec placerat dui nibh, vel aliquet tellus ultricies et."})]}),Object(P.jsxs)("div",{className:"aboutme__links",children:[Object(P.jsx)("a",{className:"aboutme__link",href:"https://t.me/ginzart",target:"_blank",rel:"noreferrer",children:"Telegram"}),Object(P.jsx)("a",{className:"aboutme__link",href:"https://github.com/artginzburg",target:"_blank",rel:"noreferrer",children:"GitHub"})]})]})]})]})})};n(50);function Ie(e){var t=e.heading,n=e.children;return Object(P.jsxs)("li",{className:"aboutproject__column",children:[Object(P.jsx)("h3",{className:"aboutproject__heading",children:t}),Object(P.jsx)("p",{className:"aboutproject__text",children:n})]})}var Fe=function(){return Object(P.jsx)("section",{className:"aboutproject",id:"about",children:Object(P.jsxs)("article",{children:[Object(P.jsx)("h2",{className:"aboutproject__title",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(P.jsxs)("ul",{className:"aboutproject__columns",children:[Object(P.jsx)(Ie,{heading:"\u0414\u0438\u043f\u043b\u043e\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u043b 5 \u044d\u0442\u0430\u043f\u043e\u0432",children:"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430, \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430\u0434 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c, \u0432\u0451\u0440\u0441\u0442\u043a\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0438."}),Object(P.jsx)(Ie,{heading:"\u041d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0438\u043f\u043b\u043e\u043c\u0430 \u0443\u0448\u043b\u043e < 5 \u043d\u0435\u0434\u0435\u043b\u044c",children:"\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u0442\u0430\u043f\u0430 \u0431\u044b\u043b \u043c\u044f\u0433\u043a\u0438\u0439 \u0438 \u0436\u0451\u0441\u0442\u043a\u0438\u0439 \u0434\u0435\u0434\u043b\u0430\u0439\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0449\u0438\u0442\u0438\u0442\u044c\u0441\u044f."})]}),Object(P.jsxs)("ul",{className:"aboutproject__plan",children:[Object(P.jsxs)("li",{className:"aboutproject__plan-segment",children:[Object(P.jsx)("p",{className:"aboutproject__plan-heading",children:"3 \u0434\u043d\u044f"}),Object(P.jsx)("p",{className:"aboutproject__plan-text",children:"Back-end"})]}),Object(P.jsxs)("li",{className:"aboutproject__plan-segment",children:[Object(P.jsx)("p",{className:"aboutproject__plan-heading",children:"4 \u043d\u0435\u0434\u0435\u043b\u0438"}),Object(P.jsx)("p",{className:"aboutproject__plan-text",children:"Front-end"})]})]})]})})};n(51);var De=function(){return Object(P.jsx)("nav",{className:"navtab",children:Object(P.jsxs)("ul",{className:"navtab__links",children:[Object(P.jsx)("li",{className:"navtab__link-container",children:Object(P.jsx)("a",{className:"navtab__link",href:"#about",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"})}),Object(P.jsx)("li",{className:"navtab__link-container",children:Object(P.jsx)("a",{className:"navtab__link",href:"#techs",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"})}),Object(P.jsx)("li",{className:"navtab__link-container",children:Object(P.jsx)("a",{className:"navtab__link",href:"#student",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"})})]})})};n(52);var Re=function(){return Object(P.jsxs)("section",{className:"portfolio",id:"portfolio",children:[Object(P.jsx)("h2",{className:"portfolio__title",children:"\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e"}),Object(P.jsxs)("ul",{className:"portfolio__links",children:[Object(P.jsx)("li",{className:"portfolio__links-item",children:Object(P.jsx)("a",{className:"portfolio__link",href:"https://artginzburg.github.io/how-to-learn/",target:"_blank",rel:"noreferrer",children:"\u0421\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"})}),Object(P.jsx)("li",{className:"portfolio__links-item",children:Object(P.jsx)("a",{className:"portfolio__link",href:"https://artginzburg.github.io/russian-travel/",target:"_blank",rel:"noreferrer",children:"\u0410\u0434\u0430\u043f\u0442\u0438\u0432\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"})}),Object(P.jsx)("li",{className:"portfolio__links-item",children:Object(P.jsx)("a",{className:"portfolio__link",href:"https://artginzburg.github.io/react-mesto-auth/",target:"_blank",rel:"noreferrer",children:"\u041e\u0434\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})})]})]})};n(53);var Te=function(){return Object(P.jsx)("section",{className:"promo",children:Object(P.jsx)("h1",{className:"promo__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430 \u0412\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})})},Le=(n(54),[["HTML"],["CSS"],["JS","javascript"],["React"],["Git"],["Express.js","express"],["mongoDB"]]);var Ue=function(){return Object(P.jsxs)("section",{className:"techs",id:"techs",children:[Object(P.jsx)("h2",{className:"techs__title",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(P.jsxs)("article",{className:"techs__content",children:[Object(P.jsx)("h3",{className:"techs__heading",children:"7 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439"}),Object(P.jsx)("p",{className:"techs__text",children:"\u041d\u0430 \u043a\u0443\u0440\u0441\u0435 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u044b \u043e\u0441\u0432\u043e\u0438\u043b\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0438 \u0432 \u0434\u0438\u043f\u043b\u043e\u043c\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435."}),Object(P.jsx)("ul",{className:"techs__list",children:Le.map((function(e,t){var n;return Object(P.jsx)("li",{className:"techs__list-item",children:Object(P.jsx)("a",{className:"techs__list-link",href:"https://github.com/topics/".concat((null!==(n=e[1])&&void 0!==n?n:e[0]).toLowerCase()),target:"_blank",rel:"noreferrer",children:e[0]})},t)}))})]})]})};var Me=function(e){var t=e.loggedIn;return X("\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(we,{loggedIn:t}),Object(P.jsxs)("main",{children:[Object(P.jsx)(Te,{}),Object(P.jsx)(De,{}),Object(P.jsx)(Fe,{}),Object(P.jsx)(Ue,{}),Object(P.jsx)(Ee,{}),Object(P.jsx)(Re,{})]}),Object(P.jsx)(Ne,{})]})},Pe=new(function(e){Object(E.a)(n,e);var t=Object(I.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"getAllMovies",value:function(){return this._customFetch("")}}]),n}(D))({baseUrl:"https://".concat(h,"/beatfilm-movies")}),ze=40;n(55);var Je=["card","isSaved","type"];function Ae(e){return"".concat(e," ").concat(["\u043c\u0438\u043d\u0443\u0442\u0430","\u043c\u0438\u043d\u0443\u0442\u044b","\u043c\u0438\u043d\u0443\u0442"][(t=e)%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?Math.abs(t)%10:5]]);var t}function qe(e){var t=e.card,n=e.isSaved,a=e.type,c=Object($.a)(e,Je),r=["moviescard__button","moviescard__button_type_".concat(a)],s=t.nameRU||t.nameEN;return Object(P.jsxs)("li",{className:"moviescard",children:[Object(P.jsx)("a",{className:"moviescard__link",href:t.trailerLink,target:"_blank",rel:"noreferrer",children:Object(P.jsxs)("figure",{className:"moviescard__figure",children:[Object(P.jsxs)("div",{className:"moviescard__text-container",children:[Object(P.jsx)("figcaption",{className:"moviescard__title",children:s}),Object(P.jsx)("p",{className:"moviescard__duration",children:Ae(t.duration)})]}),Object(P.jsx)("img",{className:"moviescard__image",src:"add"===a?"https://".concat(h).concat(t.image.url):t.image,alt:s})]})}),Object(P.jsx)("input",Object(M.a)({type:"checkbox",checked:"add"===a?n:!n,onChange:function(){n?c.onCardDelete(t):c.onCardSave(t)}},se(r)))]})}n(56);var Be,Ge=["cards","savedCards","type"],He=480,Ve=768,Ye=1280,Ke=(Be={},Object(Y.a)(Be,Ye,{cardsPerRow:3,initialRows:4,addRowsOnDemand:1}),Object(Y.a)(Be,Ve,{cardsPerRow:2,initialRows:4,addRowsOnDemand:1}),Object(Y.a)(Be,He,{cardsPerRow:1,initialRows:5,addRowsOnDemand:2}),Be);function We(e){var t=e.cards,n=e.savedCards,c=e.type,r=Object($.a)(e,Ge),s="add"===c,i=s?t:n,o=Object(a.useState)([]),l=Object(d.a)(o,2),u=l[0],j=l[1],b=Object(a.useState)(0),h=Object(d.a)(b,2),m=h[0],O=h[1],f=function(){var e=Object(a.useState)([0,0]),t=Object(d.a)(e,2),n=t[0],c=t[1];function r(){c([window.innerWidth,window.innerHeight])}return Object(a.useLayoutEffect)((function(){return window.addEventListener("resize",r),r(),function(){window.removeEventListener("resize",r)}}),[]),n}(),_=Object(d.a)(f,1)[0];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=Object(a.useRef)();Object(a.useEffect)((function(){clearTimeout(n.current),n.current=setTimeout(e,t)}),[e,t])}(Object(a.useCallback)((function(){var e,t=(e=_)>=Ye?Ke[Ye]:e>=Ve?Ke[Ve]:Ke[He],n=t.cardsPerRow*t.initialRows;if(O(t.addRowsOnDemand*t.cardsPerRow),!u.length)return j(i.slice(0,n));j(i.slice(0,u.length))}),[u.length,i,_])),Object(P.jsxs)("section",{className:"moviescards",children:[Object(P.jsx)("ul",{className:"moviescards__list",children:u.map((function(e){var t;return Object(a.createElement)(qe,Object(M.a)(Object(M.a)({},r),{},{card:e,isSaved:!s||n.some((function(t){return t.movieId===String(e.id)})),type:c,key:null!==(t=s?e.id:e.movieId)&&void 0!==t?t:Math.random()}))}))}),u.length<i.length&&Object(P.jsx)("div",{className:"moviescards__more",children:Object(P.jsx)("button",{className:"moviescards__more-button",type:"button",onClick:function(){j(i.slice(0,u.length+m))},children:"\u0415\u0449\u0451"})})]})}n(57);var Ze=function(){return Object(P.jsx)("div",{className:"preloader",children:Object(P.jsx)("div",{className:"preloader__container",children:Object(P.jsx)("span",{className:"preloader__round"})})})};n(58);function Qe(e){var t=e.filterShortState,n=e.queryState,a=Object(d.a)(t,2),c=a[0],r=a[1],s=n[1];function i(e){var t;e.preventDefault(),s(null!==(t=e.target.value)&&void 0!==t?t:e.target.search.value)}return Object(P.jsx)("section",{className:"searchform",children:Object(P.jsxs)("form",{onSubmit:i,className:"searchform__form",children:[Object(P.jsx)("fieldset",{className:"searchform__fieldset",children:Object(P.jsxs)("label",{className:"searchform__fieldset-container",children:[Object(P.jsx)("input",{onBlur:i,name:"search",required:!0,className:"searchform__input",type:"search",placeholder:"\u0424\u0438\u043b\u044c\u043c"}),Object(P.jsx)("button",{className:"searchform__submit",type:"submit"})]})}),Object(P.jsxs)("label",{title:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c <= ".concat(ze),className:"searchform__label",children:[Object(P.jsx)("input",{checked:c,onChange:function(){r(!c)},className:"searchform__switch",type:"checkbox"}),"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"]})]})})}n(59);var Xe=["savedCards","type","loggedIn"];function $e(e){var t=e.savedCards,n=void 0===t?[]:t,c=e.type,r=void 0===c?"add":c,s=e.loggedIn,i=Object($.a)(e,Xe),o="add"===r;X(o?x.title:N.title);var l=B(),u=Object(a.useState)(!1),j=Object(a.useState)(""),b=j[0],h=u[0],m=U("cards",[]),O=Object(d.a)(m,2),f=O[0],_=O[1],v=U("lastCardsFetch",0),p=Object(d.a)(v,2),g=p[0],k=p[1],C=Object(a.useState)(""),w=Object(d.a)(C,2),y=w[0],S=w[1],E=(Date.now()-g)/864e5>=1;Object(a.useEffect)((function(){!b||!E&&f.length||Pe.getAllMovies().then((function(e){_(e),k(Date.now()),S("")})).catch((function(e){S(f.length?"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0444\u0438\u043b\u044c\u043c\u043e\u0432 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c, \u043d\u043e \u043f\u043e\u0438\u0441\u043a \u043f\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u043e\u043c\u0443 \u0441\u043f\u0438\u0441\u043a\u0443 \u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d.":"\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437"),console.log("Couldnt get initial cards from the server",e)}))}),[_,b,g,k,E,f]);var I=n.filter((function(e){var t;return!e.owner||(null!==(t=e.owner._id)&&void 0!==t?t:e.owner)===l._id})),F=function(e){return!h||e.duration<=ze},D=function(e){var t,n;return!b||(null===(t=e.nameRU)||void 0===t?void 0:t.toLowerCase().includes(b.toLowerCase()))||(null===(n=e.nameEN)||void 0===n?void 0:n.toLowerCase().includes(b.toLowerCase()))},R=f.filter(F).filter(D),T=I.filter(F).filter(D),L=o?!R.length:!T.length;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(we,{loggedIn:s}),Object(P.jsxs)("main",{children:[Object(P.jsx)(Qe,{filterShortState:u,queryState:j}),f.length&&L?Object(P.jsx)("p",{className:"movies__status",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):!b&&o?null:f.length?Object(P.jsx)(We,Object(M.a)(Object(M.a)({},i),{},{query:b,type:r,cards:R,savedCards:T})):Object(P.jsx)(Ze,{}),y&&Object(P.jsx)("p",{className:"movies__status movies__status_type_error",children:y})]}),Object(P.jsx)(Ne,{})]})}n(60);function et(){return Object(P.jsxs)("main",{className:"notfound",children:[Object(P.jsx)("h1",{className:"notfound__title",children:"404"}),Object(P.jsx)("h2",{className:"notfound__subtitle",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(P.jsx)("nav",{className:"notfound__navigation",children:Object(P.jsx)(i.b,{to:m,className:"notfound__link",children:"\u041d\u0430\u0437\u0430\u0434"})})]})}n(61);var tt=["loggedIn"],nt=["reset"],at={autoCorrect:"off",spellCheck:!1,className:"".concat(te,"_theme_dark profile__details-text")};function ct(e){var t=e.loggedIn,n=Object($.a)(e,tt);X("\u041f\u0440\u043e\u0444\u0438\u043b\u044c");var a=B(),r=function(){var e=c.a.useContext(A);if(void 0===e)throw new Error("useCurrentUserDispatcher must be used within a CurrentUserProvider");return e}(),s=Z(a),i=(s.reset,Object($.a)(s,nt));function o(){return(o=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(r,a,i.getData(),"updateUserInfo");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(we,{loggedIn:t}),Object(P.jsx)("main",{children:Object(P.jsxs)(ce,{className:"profile",onSubmit:function(){return o.apply(this,arguments)},onReset:i.reset,children:[Object(P.jsxs)("h2",{className:"profile__title",children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",a.name,"!"]}),Object(P.jsxs)("div",{className:"profile__details",children:[Object(P.jsxs)("label",{className:"profile__details-item",children:[Object(P.jsx)("p",{className:"profile__details-heading",children:"\u0418\u043c\u044f"}),Object(P.jsx)("div",{className:"profile__input-container",children:Object(P.jsx)(je,Object(M.a)(Object(M.a)(Object(M.a)({},at),{},{autoComplete:"name"},i.register("name")),{},{placeholder:"\u0410\u0440\u0442 \u0413\u0438\u043d\u0437\u0431\u0443\u0440\u0433"}))})]}),Object(P.jsxs)("label",{className:"profile__details-item",children:[Object(P.jsx)("p",{className:"profile__details-heading",children:"E-mail"}),Object(P.jsx)("div",{className:"profile__input-container",children:Object(P.jsx)(je,Object(M.a)(Object(M.a)(Object(M.a)({},at),{},{type:"email",autoComplete:"email"},i.register("email")),{},{placeholder:"art.ginzburg@ya.ru"}))})]})]}),Object(P.jsxs)("div",{className:"profile__buttons",children:[Object(P.jsx)("button",{type:"submit",disabled:i.isInvalid,className:"profile__button",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(P.jsx)("button",{onClick:n.handleSignOut,type:"button",className:"profile__button profile__button_type_dangerous",children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})]})]})})]})}var rt=function(e){return Object(P.jsx)(b.b,{path:e.path,children:e.loggedIn?e.children:Object(P.jsx)(b.a,{to:_})})};var st=function(){var e=Object(b.g)(),t=U("currentUser",z),n=Object(d.a)(t,2),c=n[0],r=n[1],s=U("loggedIn",!1),i=Object(d.a)(s,2),o=i[0],g=i[1],x=function(e,t){var n=U(e,t),c=Object(d.a)(n,2),r=c[0],s=c[1],i=Object(a.useCallback)((function(e){s(btoa(e))}),[s]),o=Object(a.useRef)(atob(r));return Object(a.useEffect)((function(){o.current=atob(r)})),[o.current,i]}("email","")[1],N=U("savedCards",[]),k=Object(d.a)(N,2),C=k[0],w=k[1];Object(a.useEffect)((function(){o&&(L.getUserInfo().then(r).catch((function(e){return console.log("Couldnt get user info from the server",e)})),L.getMovies().then(w).catch((function(e){return console.log("Couldnt get saved cards from the server",e)})))}),[o,r,w]);var y=Object(a.useCallback)((function(e){var t=C,n=e.id?C.find((function(t){return t.movieId===String(e.id)})):e;return w(C.filter((function(t){return e.id?t.movieId!==String(e.id):t._id!==e._id}))),L.deleteMovie(n._id).catch((function(e){w(t),console.log("Couldnt delete card on the server",e)}))}),[C,w]);function S(e){return E.apply(this,arguments)}function E(){return(E=Object(j.a)(l.a.mark((function e(t){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C,a={country:t.country,director:t.director,duration:t.duration,year:t.year,description:t.description,image:"https://".concat(h).concat(t.image.url),trailer:t.trailerLink,thumbnail:"https://".concat(h).concat(t.image.formats.thumbnail.url),movieId:String(t.id),nameRU:t.nameRU,nameEN:t.nameEN},w([a].concat(Object(u.a)(C))),e.prev=3,e.next=6,L.saveMovie(a);case 6:return c=e.sent,w([c].concat(Object(u.a)(C))),e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(3),w(n),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}var I=Object(a.useCallback)((function(e){x(e),g(!0)}),[x,g]),F=Object(a.useCallback)((function(){L.getUserInfo().then((function(e){e&&I(e.email)})).catch((function(e){g(!1),console.log(e)}))}),[I,g]);return Object(a.useEffect)((function(){F()}),[F]),Object(P.jsx)(q,{state:c,dispatch:r,children:Object(P.jsxs)(b.d,{children:[Object(P.jsx)(b.b,{exact:!0,path:m,children:Object(P.jsx)(Me,{loggedIn:o})}),Object(P.jsx)(b.b,{path:[v,_],children:Object(P.jsx)(ge,{loggedIn:o,handleLogin:function(t,n,a){if(n&&a)return L.login(n,a).then((function(a){a&&(t.target.reset(),I(n),e.push(O))})).catch((function(e){console.log(e)}))},handleRegister:function(t,n,a,c){return L.register(n,a,c).then((function(){e.replace(_)})).catch((function(e){console.log(e)}))}})}),Object(P.jsx)(rt,{path:O,loggedIn:o,children:Object(P.jsx)($e,{onCardSave:S,onCardDelete:y,savedCards:C,loggedIn:o})}),Object(P.jsx)(rt,{path:f,loggedIn:o,children:Object(P.jsx)($e,{onCardSave:S,onCardDelete:y,savedCards:C,type:"remove",loggedIn:o})}),Object(P.jsx)(rt,{path:p,loggedIn:o,children:Object(P.jsx)(ct,{handleSignOut:function(){L.logout().then((function(){g(!1),e.replace(m),window.scrollTo(0,0)})).catch((function(e){console.log(e)}))},loggedIn:o})}),Object(P.jsx)(b.b,{component:et})]})})},it=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,63)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(P.jsx)(c.a.StrictMode,{children:Object(P.jsx)(i.a,{basename:"",children:Object(P.jsx)(st,{})})}),document.getElementById("root")),it()}],[[62,1,2]]]);
//# sourceMappingURL=main.c20d9fa4.chunk.js.map