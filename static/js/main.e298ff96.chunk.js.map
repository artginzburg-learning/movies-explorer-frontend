{"version":3,"sources":["utils/constants.js","utils/Api.js","utils/MainApi.js","hooks/useStateWithLocalStorage.js","hooks/useEventListener.js","contexts/CurrentUserContext.jsx","hooks/useValidatedForm.js","hooks/useTitle.js","images/logo.svg","utils/toClassNames.js","components/Form/index.jsx","components/FormInput/index.jsx","components/Authentication/LoginOrRegister/index.jsx","components/Authentication/Login/index.jsx","components/Authentication/Register/index.jsx","components/Authentication/index.jsx","hooks/useStateWithBase64.js","components/Footer/index.jsx","components/Navigation/index.jsx","components/Header/index.jsx","images/student.jpg","components/Main/AboutMe/index.jsx","components/Main/AboutProject/index.jsx","components/Main/NavTab/index.jsx","components/Main/Portfolio/index.jsx","components/Main/Promo/index.jsx","components/Main/Techs/index.jsx","components/Main/index.jsx","utils/MoviesApi.js","components/Movies/MoviesCard/index.jsx","utils/declOfNum.js","components/Movies/MoviesCardList/index.jsx","hooks/useWindowSize.js","hooks/useTimeoutLimitedEffect.js","components/Movies/Preloader/index.jsx","components/Movies/SearchForm/index.jsx","components/Movies/index.jsx","components/NotFound/index.jsx","components/Profile/index.jsx","components/ProtectedRoute.jsx","components/App.jsx","utils/scrollToTop.js","reportWebVitals.js","index.jsx"],"names":["API_DOMAIN","PATHS","PATHNAMES","title","action","MOVIES_CONFIG","FORM_CLASSES","PATTERNS","EXTERNAL_LINK_PROPS","target","rel","Api","options","_handleFetch","res","a","json","parsed","ok","Promise","reject","statusText","_handleData","result","data","this","_baseUrl","baseUrl","_headers","headers","_credentials","credentials","method","body","JSON","stringify","fetch","then","apiHomepage","URL","homepage","hostname","api","host","endpoints","register","login","logout","user","movies","saveMovie","_customFetch","deleteMovie","movieId","email","password","name","useStateWithLocalStorage","key","initialValue","useState","item","localStorage","parse","error","console","log","currentState","updateCurrentState","setCurrentState","useCallback","value","eventName","handler","element","window","savedHandler","useRef","useEffect","current","addEventListener","eventListener","event","removeEventListener","useEventListener","e","newValue","defaultUserState","CurrentUserContext","React","createContext","CurrentUserDispatchContext","CurrentUserProvider","state","dispatch","children","Provider","useCurrentUser","context","useContext","undefined","Error","objectsAreEqual","first","second","sendApiUpdate","updates","func","expectedUser","updatedUser","initialStates","useValidatedForm","initialData","setData","errors","setErrors","isInvalid","setIsInvalid","handleChange","prevData","newData","handleError","validationMessage","reset","e_","registerForm","isSubmitDisabled","onReset","onChange","input","currentTarget","length","formValidity","closest","checkValidity","getData","defaultTitle","useTitle","document","toClassNames","arr","filter","Boolean","join","classNames","className","Form","memo","onSubmit","props","handleSubmit","preventDefault","defaults","FormInput","forwardRef","forwardedRef","isFocused","labelTitle","ref","createRef","type","required","conditionalMinLength","finalProps","minLength","parentElement","activeElement","setTimeout","focus","id","propsForInputs","autoCorrect","spellCheck","inputNames","LoginOrRegister","form","additionalInput","buttonIsSaving","setButtonIsSaving","status","setStatus","buttonTitle","buttonSavingTitle","to","alt","src","logo","catch","err","message","finally","autoFocus","autoComplete","disabled","pattern","placeholder","passwordAutocomplete","otherOption","tagline","path","defaultProps","Login","Register","Authentication","elementName","atob","loggedIn","handleLogin","handleRegister","currentYear","Date","getFullYear","Footer","href","repository","author","url","modalRoot","getElementById","Navigation","closeMenuIfNeeded","includes","onClose","createPortal","onClick","exact","activeClassName","Header","isMenuOpen","setIsMenuOpen","openMenu","closeMenu","myAge","birthDate","today","age","m","getMonth","getDate","getAge","AboutMe","student","AboutProjectColumn","heading","AboutProject","NavTab","folio","Portfolio","map","project","index","Promo","technologies","Techs","toLowerCase","Main","durationDeclension","duration","number","Math","abs","MoviesCard","card","isSaved","typeIsDefault","buttonClassNames","nameRU","nameEN","trailerLink","trailer","image","checked","onCardDelete","onCardSave","breakpoints","layoutConfig","cardsPerRow","initialRows","addRowsOnDemand","MoviesCardList","cards","savedCards","cardsToDisplay","cardsLimited","setCardsLimited","cardsOnDemand","setCardsOnDemand","size","setSize","updateSize","innerWidth","innerHeight","useLayoutEffect","useWindowSize","windowWidth","reactCallback","timeout","limiter","clearTimeout","useTimeoutLimitedEffect","currentWidth","appropriateLayout","initialCardsQuantity","slice","some","c","String","random","Preloader","SearchForm","updateQuery","filterShortState","queryState","filterShort","setFilterShort","query","onBlur","defaultValue","Movies","currentUser","setQuery","setCards","lastCardsFetch","setLastCardsFetch","errorMessage","setErrorMessage","cardsAreOutdated","now","moviesApi","getAllMovies","newCards","personalSavedCards","owner","_id","filterShortIfNeeded","filterSearch","filteredCards","filteredSavedCards","nothingFound","newQuery","search","NotFound","Profile","setCurrentUser","useCurrentUserDispatcher","validation","handleSignOut","ProtectedRoute","App","history","useHistory","setLoggedIn","setEmail","computed","defaultForComputed","initialState","updateState","setState","btoa","useStateWithBase64","setSavedCards","mainApi","getUserInfo","getMovies","handleCardDelete","oldSavedCards","cardToDelete","find","handleCardSave","cardToSave","country","director","year","description","thumbnail","formats","newCard","handleTokenCheck","handleSubmitLogin","push","replace","scrollTo","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","process"],"mappings":"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","file":"static/js/main.e298ff96.chunk.js","sourcesContent":["export const API_DOMAIN = 'api.nomoreparties.co';\n\nexport const PATHS = {\n  main: '/',\n  search: '/movies',\n  saved: '/saved-movies',\n  login: '/signin',\n  register: '/signup',\n  account: '/profile',\n};\n\nexport const PATHNAMES = {\n  global: {\n    title: 'Movies Explorer',\n  },\n  search: {\n    title: 'Фильмы',\n  },\n  saved: {\n    title: 'Сохранённые фильмы',\n  },\n  login: {\n    title: 'Вход',\n    action: 'Войти',\n  },\n  register: {\n    title: 'Регистрация',\n    action: 'Зарегистрироваться',\n  },\n  account: {\n    title: 'Аккаунт',\n  },\n};\n\nexport const MOVIES_CONFIG = {\n  shortDuration: 40,\n  defaultType: 'add',\n};\n\nexport const FORM_CLASSES = {\n  inputClass: 'form__input',\n  submitButtonClass: 'form__button',\n};\n\nexport const PATTERNS = {\n  email: '^[a-zA-Z0-9]+@(?:[a-zA-Z0-9]+\\\\.)+[A-Za-z]+$',\n};\n\nexport const EXTERNAL_LINK_PROPS = {\n  target: '_blank',\n  rel: 'noreferrer',\n};\n","export default class Api {\n  constructor(options = {}) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n    this._credentials = options.credentials;\n  }\n\n  _handleFetch = async (res) => {\n    const parsed = await res.json();\n\n    return res.ok ? parsed : Promise.reject(parsed ?? res.statusText);\n  };\n\n  _handleData = (result) => result.data ?? result;\n\n  _customFetch(target, method, body) {\n    const options = {\n      headers: this._headers ?? {},\n      credentials: this._credentials,\n    };\n\n    if (method && method !== 'GET') {\n      options.method = method;\n      if (method !== 'DELETE') {\n        options.headers['Content-Type'] = 'application/json';\n      }\n    }\n\n    if (body) {\n      options.body = JSON.stringify(body);\n    }\n\n    return fetch(`${this._baseUrl}${target}`, options)\n      .then(this._handleFetch)\n      .then(this._handleData);\n  }\n}\n","import { homepage } from '../../package.json';\n\nimport Api from './Api';\n\nconst { NODE_ENV } = process.env;\n\nconst apiHomepage = new URL(homepage);\napiHomepage.hostname = `api.${apiHomepage.hostname}`;\nconst apiPath = NODE_ENV === 'production' ? apiHomepage : 'https://localhost:3001/';\n\nconst api = {\n  host: apiPath,\n  endpoints: {\n    register: 'signup',\n    login: 'signin',\n    logout: 'signout',\n    user: 'users/me',\n    movies: 'movies',\n  },\n};\n\nclass MainApi extends Api {\n  register(email, password, name) {\n    return this._customFetch(api.endpoints.register, 'POST', { name, password, email });\n  }\n  login(email, password) {\n    return this._customFetch(api.endpoints.login, 'POST', { password, email });\n  }\n  logout() {\n    return this._customFetch(api.endpoints.logout, 'DELETE');\n  }\n\n  getUserInfo() {\n    return this._customFetch(api.endpoints.user);\n  }\n  updateUserInfo({ name, email }) {\n    return this._customFetch(api.endpoints.user, 'PATCH', { name, email });\n  }\n\n  getMovies() {\n    return this._customFetch(api.endpoints.movies);\n  }\n  saveMovie = (data) => this._customFetch(api.endpoints.movies, 'POST', data);\n  deleteMovie = (movieId) => this._customFetch(`${api.endpoints.movies}/${movieId}`, 'DELETE');\n}\n\nexport default new MainApi({ baseUrl: api.host, credentials: 'include' });\n","import { useState, useCallback } from 'react';\n\nimport useEventListener from './useEventListener';\n\nexport default function useStateWithLocalStorage(key, initialValue) {\n  const [currentState, updateCurrentState] = useState(() => {\n    try {\n      const item = localStorage[key];\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.log(error);\n      return initialValue;\n    }\n  });\n\n  const setCurrentState = useCallback(\n    (value) => {\n      // const valueToStore = value instanceof Function ? value(currentState) : value;\n\n      localStorage[key] = JSON.stringify(value);\n      updateCurrentState(value);\n    },\n    [key]\n  );\n\n  const localStorageChanged = useCallback(\n    (e) => {\n      if (e.key === key) {\n        updateCurrentState(e.newValue ? JSON.parse(e.newValue) : initialValue);\n      }\n    },\n    [key, initialValue]\n  );\n\n  useEventListener('storage', localStorageChanged);\n\n  return [currentState, setCurrentState];\n}\n","import { useRef, useEffect } from 'react';\n\nexport default function useEventListener(eventName, handler, element = window) {\n  // Create a ref that stores handler\n  const savedHandler = useRef();\n\n  // Update ref.current value if handler changes.\n  // This allows our effect below to always get latest handler ...\n  // ... without us needing to pass it in effect deps array ...\n  // ... and potentially cause effect to re-run every render.\n  useEffect(() => {\n    savedHandler.current = handler;\n  }, [handler]);\n\n  useEffect(\n    () => {\n      // Make sure element supports addEventListener\n      // On\n      const isSupported = element && element.addEventListener;\n      if (!isSupported) return;\n\n      // Create event listener that calls handler function stored in ref\n      const eventListener = (event) => savedHandler.current(event);\n\n      // Add event listener\n      element.addEventListener(eventName, eventListener);\n\n      // Remove event listener on cleanup\n      return () => {\n        element.removeEventListener(eventName, eventListener);\n      };\n    },\n    [eventName, element] // Re-run if eventName or element changes\n  );\n}\n","import React from 'react';\n\nimport api from '../utils/MainApi';\n\nconst defaultUserState = {\n  name: 'Потеряно соединение',\n};\n\nconst CurrentUserContext = React.createContext();\nconst CurrentUserDispatchContext = React.createContext();\n\nfunction CurrentUserProvider({ state, dispatch, children }) {\n  return (\n    <CurrentUserContext.Provider value={state}>\n      <CurrentUserDispatchContext.Provider value={dispatch}>\n        {children}\n      </CurrentUserDispatchContext.Provider>\n    </CurrentUserContext.Provider>\n  );\n}\n\nfunction useCurrentUser() {\n  const context = React.useContext(CurrentUserContext);\n  if (context === undefined) {\n    throw new Error('useCurrentUser must be used within a CurrentUserProvider');\n  }\n  return context;\n}\n\nfunction useCurrentUserDispatcher() {\n  const context = React.useContext(CurrentUserDispatchContext);\n  if (context === undefined) {\n    throw new Error('useCurrentUserDispatcher must be used within a CurrentUserProvider');\n  }\n  return context;\n}\n\nfunction objectsAreEqual(first, second) {\n  return JSON.stringify(first) === JSON.stringify(second);\n}\n\nasync function sendApiUpdate(dispatch, user, updates, func) {\n  const expectedUser = { ...user, ...updates };\n  dispatch(expectedUser);\n\n  try {\n    const updatedUser = await api[func](updates);\n    if (!objectsAreEqual(expectedUser, updatedUser)) {\n      dispatch(updatedUser);\n    }\n    return updatedUser;\n  } catch (error) {\n    dispatch(user);\n    console.log('Couldnt update user information on the server', error);\n    throw error; // Forwarding error\n  }\n}\n\nexport {\n  defaultUserState,\n  CurrentUserProvider,\n  useCurrentUser,\n  useCurrentUserDispatcher,\n  sendApiUpdate,\n};\n","import { useCallback, useState } from 'react';\n\nconst initialStates = {\n  errors: {},\n  isInvalid: true,\n};\n\nexport default function useValidatedForm(initialData = {}) {\n  const [data, setData] = useState(initialData);\n  const [errors, setErrors] = useState(initialStates.errors);\n  const [isInvalid, setIsInvalid] = useState(initialStates.isInvalid);\n\n  function handleChange(name, value) {\n    setData((prevData) => {\n      const newData = { ...prevData, [name]: value };\n\n      const newDataEqualsInitial =\n        JSON.stringify({ ...initialData, ...newData }) === JSON.stringify(initialData);\n      if (newDataEqualsInitial) {\n        setIsInvalid(true);\n      }\n\n      return newData;\n    });\n  }\n\n  function handleError(name, validationMessage) {\n    setErrors((prevData) => ({ ...prevData, [name]: validationMessage }));\n  }\n\n  const reset = useCallback(\n    (e_, data) => {\n      setData(data ?? initialData);\n      setErrors(initialStates.errors);\n      setIsInvalid(initialStates.isInvalid);\n    },\n    [initialData],\n  );\n\n  return {\n    registerForm() {\n      return {\n        isSubmitDisabled: isInvalid,\n        onReset: reset,\n      };\n    },\n    register(name) {\n      return {\n        value: data[name] ?? '',\n        onChange: (e) => {\n          const input = e.currentTarget;\n          const { value, validationMessage } = input;\n\n          handleChange(name, value);\n          handleError(name, value.length ? validationMessage : '');\n\n          const formValidity = input.closest('form').checkValidity();\n          setIsInvalid(!formValidity);\n        },\n        validationMessage: errors[name],\n        name,\n      };\n    },\n    reset,\n    getData() {\n      return data;\n    },\n    isInvalid,\n    setIsInvalid,\n  };\n}\n","import { useEffect } from 'react';\n\nimport { PATHNAMES } from '../utils/constants';\n\nconst defaultTitle = PATHNAMES.global.title;\n\nexport const useTitle = (title) => {\n  useEffect(() => {\n    document.title = title ? `${title} · ${defaultTitle}` : defaultTitle;\n  }, [title]);\n};\n","export default __webpack_public_path__ + \"static/media/logo.1edc39b5.svg\";","export const toClassNames = (arr) => arr.filter(Boolean).join(' ');\n\nexport const classNames = (arr) => ({ className: toClassNames(arr) });\n","import { memo, useCallback } from 'react';\n\nimport './Form.scss';\n\nconst Form = memo(({ onSubmit, ...props }) => {\n  const handleSubmit = useCallback(\n    (e) => {\n      if (onSubmit) {\n        e.preventDefault();\n\n        onSubmit(e);\n      }\n    },\n    [onSubmit],\n  );\n\n  return (\n    <form action=\"#\" onSubmit={handleSubmit} className=\"form\" {...props}>\n      {props.children}\n    </form>\n  );\n});\n\nexport default Form;\n","import { forwardRef, createRef, useEffect } from 'react';\n\nimport { FORM_CLASSES } from '../../utils/constants';\nimport { classNames } from '../../utils/toClassNames';\n\nimport './FormInput.scss';\n\nconst defaults = {\n  type: 'text',\n  required: true,\n  minLength: 2,\n};\n\nconst FormInput = forwardRef(\n  ({ isFocused, validationMessage, labelTitle, ...props }, forwardedRef) => {\n    const ref = forwardedRef ?? createRef();\n\n    const type = props.type ?? defaults.type;\n\n    const required = props.required ?? defaults.required;\n\n    const conditionalMinLength = type === defaults.type ? defaults.minLength : null;\n    const minLength = props.minLength ?? conditionalMinLength;\n\n    const finalProps = {\n      type,\n      minLength,\n      required,\n      ref,\n    };\n\n    useEffect(() => {\n      if (\n        isFocused &&\n        ref &&\n        ref.current &&\n        ref.current.parentElement !== document.activeElement.parentElement\n      ) {\n        setTimeout(() => {\n          ref && ref.current && ref.current.focus();\n        }, 50);\n      }\n    }, [isFocused, ref]);\n\n    return (\n      <>\n        <input\n          {...props}\n          {...classNames([\n            FORM_CLASSES.inputClass,\n            validationMessage && `${FORM_CLASSES.inputClass}_type_error`,\n            props.className,\n          ])}\n          {...finalProps}\n        />\n        <p\n          {...classNames([\n            `${FORM_CLASSES.inputClass}-error`,\n            `${props.className}-error`,\n            validationMessage && `${FORM_CLASSES.inputClass}-error_visible`,\n          ])}\n          id={`${props.id}-error`}\n        >\n          {validationMessage}\n        </p>\n      </>\n    );\n  },\n);\n\nexport default FormInput;\n","import { memo, useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport logo from '../../../images/logo.svg';\n\nimport { PATHNAMES, PATHS, FORM_CLASSES, PATTERNS } from '../../../utils/constants';\nimport { classNames } from '../../../utils/toClassNames';\n\nimport Form from '../../Form';\nimport FormInput from '../../FormInput';\n\nconst propsForInputs = {\n  autoCorrect: 'off',\n  spellCheck: false,\n  className: `${FORM_CLASSES.inputClass}_theme_dark`,\n};\n\nconst inputNames = {\n  email: 'email',\n  password: 'password',\n};\n\nconst LoginOrRegister = memo(({ form, additionalInput, ...props }) => {\n  const [buttonIsSaving, setButtonIsSaving] = useState(false);\n  const [status, setStatus] = useState('');\n\n  const buttonTitle = buttonIsSaving ? `${props.buttonSavingTitle}...` : props.buttonTitle;\n\n  function handleSubmit(e) {\n    setButtonIsSaving(true);\n\n    const { name, email, password } = form.getData();\n\n    props\n      .handleSubmit(e, email, password, name)\n      .catch((err) => {\n        form.setIsInvalid(true);\n        setStatus('');\n        setTimeout(() => {\n          err.message ? setStatus(err.message) : console.log(err);\n        });\n      })\n      .finally(() => {\n        setButtonIsSaving(false);\n      });\n  }\n\n  return (\n    <div className=\"auth\">\n      <Link to={PATHS.main} className=\"logo auth__logo\">\n        <img className=\"logo__img\" alt={PATHNAMES.global.title} src={logo} />\n      </Link>\n\n      <h2 className=\"auth__title\">{props.title}</h2>\n\n      <Form onSubmit={handleSubmit} onReset={form.reset}>\n        <div className=\"form__container\">\n          {additionalInput && (\n            <label>\n              <p className=\"auth__label\">{additionalInput.title}</p>\n              <FormInput\n                {...propsForInputs}\n                autoFocus\n                {...form.register(additionalInput.name)}\n                id={additionalInput.name}\n                type={additionalInput.name}\n                autoComplete={additionalInput.name}\n                {...additionalInput.props}\n                disabled={buttonIsSaving}\n              />\n            </label>\n          )}\n          <label>\n            <p className=\"auth__label\">E-mail</p>\n            <FormInput\n              {...propsForInputs}\n              {...{ autoFocus: !additionalInput }}\n              {...form.register(inputNames.email)}\n              pattern={PATTERNS.email}\n              id={inputNames.email}\n              type={inputNames.email}\n              autoComplete={inputNames.email}\n              placeholder=\"mail@example.com\"\n              disabled={buttonIsSaving}\n            />\n          </label>\n          <label>\n            <p className=\"auth__label\">Пароль</p>\n            <FormInput\n              {...propsForInputs}\n              {...form.register(inputNames.password)}\n              type={inputNames.password}\n              id={props.passwordAutocomplete}\n              autoComplete={props.passwordAutocomplete}\n              placeholder=\"n4Gorshke7idelKING\"\n              disabled={buttonIsSaving}\n            />\n          </label>\n        </div>\n\n        <p {...classNames(['auth__status', status && 'auth__status_visible'])}>{status}</p>\n\n        <button\n          type=\"submit\"\n          disabled={form.isInvalid || buttonIsSaving}\n          className={`auth__button ${FORM_CLASSES.submitButtonClass} ${FORM_CLASSES.submitButtonClass}_theme_dark`}\n        >\n          {buttonTitle}\n        </button>\n      </Form>\n\n      <p className=\"auth__signin\">\n        {`${props.otherOption.tagline} `}\n        <Link to={props.otherOption.path} className=\"auth__signin-link\">\n          {props.otherOption.title}\n        </Link>\n      </p>\n    </div>\n  );\n});\n\nexport default LoginOrRegister;\n","import { memo } from 'react';\n\nimport { useTitle } from '../../../hooks/useTitle';\nimport { PATHNAMES, PATHS } from '../../../utils/constants';\n\nimport LoginOrRegister from '../LoginOrRegister';\n\nconst defaultProps = {\n  passwordAutocomplete: 'current-password',\n  title: 'Рады видеть!',\n  buttonTitle: PATHNAMES.login.action,\n  buttonSavingTitle: PATHNAMES.login.title,\n  otherOption: {\n    tagline: 'Ещё не зарегистрированы?',\n    path: PATHS.register,\n    title: PATHNAMES.register.title,\n  },\n};\n\nconst Login = memo((props) => {\n  useTitle(PATHNAMES.login.title);\n\n  return <LoginOrRegister {...props} {...defaultProps} />;\n});\n\nexport default Login;\n","import { memo } from 'react';\n\nimport { useTitle } from '../../../hooks/useTitle';\nimport { PATHS, PATHNAMES } from '../../../utils/constants';\n\nimport LoginOrRegister from '../LoginOrRegister';\n\nconst defaultProps = {\n  passwordAutocomplete: 'new-password',\n  title: 'Добро пожаловать!',\n  buttonTitle: PATHNAMES.register.action,\n  buttonSavingTitle: PATHNAMES.register.title,\n  otherOption: {\n    tagline: 'Уже зарегистрированы?',\n    path: PATHS.login,\n    title: PATHNAMES.login.action,\n  },\n};\n\nconst Register = memo((props) => {\n  useTitle(PATHNAMES.register.title);\n\n  return (\n    <LoginOrRegister\n      {...props}\n      {...defaultProps}\n      additionalInput={{\n        title: 'Имя',\n        name: 'name',\n        props: {\n          placeholder: 'Арт',\n          pattern: '[A-Za-zА-ЯЁа-яё -]+',\n        },\n      }}\n    />\n  );\n});\n\nexport default Register;\n","import { memo } from 'react';\nimport { Redirect, Route } from 'react-router-dom';\n\nimport { PATHS } from '../../utils/constants';\n\nimport { parseFixedLocalBase64Value } from '../../hooks/useStateWithBase64';\nimport useValidatedForm from '../../hooks/useValidatedForm';\n\nimport Login from './Login';\nimport Register from './Register';\n\nimport './Authentication.scss';\n\nconst Authentication = memo((props) => {\n  const form = useValidatedForm({\n    email: parseFixedLocalBase64Value('email') ?? '',\n    password: '',\n  });\n\n  return props.loggedIn ? (\n    <Redirect to={PATHS.main} />\n  ) : (\n    <>\n      <Route path={PATHS.login}>\n        <Login handleSubmit={props.handleLogin} form={form} />\n      </Route>\n      <Route path={PATHS.register}>\n        <Register handleSubmit={props.handleRegister} form={form} />\n      </Route>\n    </>\n  );\n});\n\nexport default Authentication;\n","import { useCallback, useEffect, useRef } from 'react';\nimport useStateWithLocalStorage from './useStateWithLocalStorage';\n\nexport const parseFixedLocalBase64Value = (elementName) =>\n  localStorage[elementName] && atob(JSON.parse(localStorage[elementName]));\n\nexport default function useStateWithBase64(computed, defaultForComputed) {\n  const [initialState, updateState] = useStateWithLocalStorage(computed, defaultForComputed);\n\n  const setState = useCallback(\n    (value) => {\n      updateState(btoa(value));\n    },\n    [updateState]\n  );\n\n  const state = useRef(atob(initialState));\n\n  useEffect(() => {\n    state.current = atob(initialState);\n  });\n\n  return [state.current, setState];\n}\n","import { author, repository } from '../../../package.json';\n\nimport { EXTERNAL_LINK_PROPS } from '../../utils/constants';\n\nimport './Footer.scss';\n\nconst currentYear = new Date().getFullYear();\n\nexport default function Footer() {\n  return (\n    <footer className=\"footer\">\n      <h2 className=\"footer__title\">Учебный проект Яндекс.Практикум х BeatFilm.</h2>\n      <div className=\"footer__copyright\">\n        <div className=\"footer__links\">\n          <a className=\"footer__link\" href=\"https://practicum.yandex.ru\" {...EXTERNAL_LINK_PROPS}>\n            Яндекс.Практикум\n          </a>\n          <a className=\"footer__link\" href={repository} {...EXTERNAL_LINK_PROPS}>\n            GitHub\n          </a>\n          <a className=\"footer__link\" href=\"https://t.me/artginzburg\" {...EXTERNAL_LINK_PROPS}>\n            Telegram\n          </a>\n        </div>\n        <a\n          className=\"footer__link footer__link-copyright\"\n          href={author.url}\n          {...EXTERNAL_LINK_PROPS}\n        >\n          &copy; {currentYear}\n        </a>\n      </div>\n    </footer>\n  );\n}\n","import { createPortal } from 'react-dom';\nimport { Link, NavLink } from 'react-router-dom';\n\nimport { PATHNAMES, PATHS } from '../../utils/constants';\n\nimport './Navigation.scss';\n\nconst modalRoot = document.getElementById('modal-root');\n\nexport default function Navigation(props) {\n  function closeMenuIfNeeded(e) {\n    if (!e.target.className.includes('active')) {\n      props.onClose();\n    }\n  }\n\n  return createPortal(\n    <section onClick={props.onClose} className=\"navigation\">\n      <nav className=\"navigation__container\">\n        <button onClick={props.onClose} type=\"button\" className=\"navigation__close-button\" />\n\n        <ul className=\"navigation__list\">\n          <li className=\"navigation__list-item\">\n            <NavLink\n              exact\n              to={PATHS.main}\n              className=\"navigation__link\"\n              activeClassName=\"navigation__link_active\"\n            >\n              Главная\n            </NavLink>\n          </li>\n          <li className=\"navigation__list-item\">\n            <NavLink\n              to={PATHS.search}\n              className=\"navigation__link\"\n              activeClassName=\"navigation__link_active\"\n              onClick={closeMenuIfNeeded}\n            >\n              {PATHNAMES.search.title}\n            </NavLink>\n          </li>\n          <li className=\"navigation__list-item\">\n            <NavLink\n              to={PATHS.saved}\n              className=\"navigation__link\"\n              activeClassName=\"navigation__link_active\"\n              onClick={closeMenuIfNeeded}\n            >\n              {PATHNAMES.saved.title}\n            </NavLink>\n          </li>\n        </ul>\n\n        <Link to={PATHS.account} className=\"profile-button navigation__profile-button\">\n          {PATHNAMES.account.title}\n        </Link>\n      </nav>\n    </section>,\n    modalRoot,\n  );\n}\n","import { useState, useCallback } from 'react';\nimport { Link, NavLink } from 'react-router-dom';\n\nimport logo from '../../images/logo.svg';\n\nimport { PATHNAMES, PATHS } from '../../utils/constants';\nimport { classNames } from '../../utils/toClassNames';\n\nimport Navigation from '../Navigation';\n\nimport './Header.scss';\n\nfunction Header({ loggedIn, className }) {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  const openMenu = useCallback(() => {\n    setIsMenuOpen(true);\n  }, []);\n\n  const closeMenu = useCallback((e) => {\n    if (!e || e.target === e.currentTarget) {\n      setIsMenuOpen(false);\n    }\n  }, []);\n\n  return (\n    <header {...classNames(['header', className])}>\n      <nav className=\"header__links\">\n        <Link to={PATHS.main} className=\"logo header__logo\">\n          <img className=\"logo__img\" alt={PATHNAMES.global.title} src={logo} />\n        </Link>\n\n        {loggedIn && (\n          <div className=\"header__navigation\">\n            <NavLink\n              activeClassName=\"header__navigation-link_active\"\n              to={PATHS.search}\n              className=\"header__navigation-link\"\n            >\n              {PATHNAMES.search.title}\n            </NavLink>\n            <NavLink\n              activeClassName=\"header__navigation-link_active\"\n              to={PATHS.saved}\n              className=\"header__navigation-link\"\n            >\n              {PATHNAMES.saved.title}\n            </NavLink>\n          </div>\n        )}\n      </nav>\n\n      <div className=\"header__profile\">\n        {loggedIn ? (\n          <>\n            <Link to={PATHS.account} className=\"profile-button header__profile-button\">\n              {PATHNAMES.account.title}\n            </Link>\n            <button type=\"button\" onClick={openMenu} className=\"header__burger\" />\n            {isMenuOpen && <Navigation onClose={closeMenu} />}\n          </>\n        ) : (\n          <>\n            <Link to={PATHS.register} className=\"header__profile-link\">\n              {PATHNAMES.register.title}\n            </Link>\n            <Link to={PATHS.login} className=\"header__profile-link\">\n              {PATHNAMES.login.action}\n            </Link>\n          </>\n        )}\n      </div>\n    </header>\n  );\n}\n\nexport default Header;\n","export default __webpack_public_path__ + \"static/media/student.22e6909b.jpg\";","import { author } from '../../../../package.json';\n\nimport student from '../../../images/student.jpg';\nimport { EXTERNAL_LINK_PROPS } from '../../../utils/constants';\n\nimport './AboutMe.scss';\n\nconst birthday = new Date(2002, 3, 25);\n\nfunction getAge(birthDate) {\n  const today = new Date();\n  let age = today.getFullYear() - birthDate.getFullYear();\n  const m = today.getMonth() - birthDate.getMonth();\n  if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n    age--;\n  }\n  return age;\n}\n\nconst myAge = getAge(birthday);\n\nexport default function AboutMe() {\n  return (\n    <section className=\"aboutme\" id=\"student\">\n      <article>\n        <h2 className=\"aboutme__title\">Студент</h2>\n\n        <div className=\"aboutme__content\">\n          <img className=\"aboutme__image\" src={student} alt=\"Арт Гинзбург\" />\n          <div className=\"aboutme__student\">\n            <div className=\"aboutme__student-article\">\n              <h3 className=\"aboutme__heading\">Артур</h3>\n              <p className=\"aboutme__subheading\">Фронтенд-разработчик, {myAge} лет</p>\n              <p className=\"aboutme__text\">\n                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam accumsan volutpat\n                sollicitudin. Nullam eget mauris ante. Nullam id mattis sapien. Praesent mollis,\n                diam eget dictum semper, velit diam ultrices ante, vitae condimentum lorem eros\n                vitae tortor. Etiam elit leo, hendrerit et nisi a, aliquam suscipit tellus.\n                Suspendisse pretium tellus ac erat ultrices viverra. Donec placerat dui nibh, vel\n                aliquet tellus ultricies et.\n              </p>\n            </div>\n            <div className=\"aboutme__links\">\n              <a className=\"aboutme__link\" href=\"https://t.me/ginzart\" {...EXTERNAL_LINK_PROPS}>\n                Telegram\n              </a>\n              <a className=\"aboutme__link\" href={author.url} {...EXTERNAL_LINK_PROPS}>\n                GitHub\n              </a>\n            </div>\n          </div>\n        </div>\n      </article>\n    </section>\n  );\n}\n","import './AboutProject.scss';\n\nfunction AboutProjectColumn({ heading, children }) {\n  return (\n    <li className=\"aboutproject__column\">\n      <h3 className=\"aboutproject__heading\">{heading}</h3>\n      <p className=\"aboutproject__text\">{children}</p>\n    </li>\n  );\n}\n\nfunction AboutProject() {\n  return (\n    <section className=\"aboutproject\" id=\"about\">\n      <article>\n        <h2 className=\"aboutproject__title\">О проекте</h2>\n\n        <ul className=\"aboutproject__columns\">\n          <AboutProjectColumn heading=\"Дипломный проект включал 5 этапов\">\n            Составление плана, работу над бэкендом, вёрстку, добавление функциональности и финальные\n            доработки.\n          </AboutProjectColumn>\n          <AboutProjectColumn heading=\"На выполнение диплома ушло < 5 недель\">\n            У каждого этапа был мягкий и жёсткий дедлайн, которые нужно было соблюдать, чтобы\n            успешно защититься.\n          </AboutProjectColumn>\n        </ul>\n\n        <ul className=\"aboutproject__plan\">\n          <li className=\"aboutproject__plan-segment\">\n            <p className=\"aboutproject__plan-heading\">3 дня</p>\n            <p className=\"aboutproject__plan-text\">Back-end</p>\n          </li>\n          <li className=\"aboutproject__plan-segment\">\n            <p className=\"aboutproject__plan-heading\">4 недели</p>\n            <p className=\"aboutproject__plan-text\">Front-end</p>\n          </li>\n        </ul>\n      </article>\n    </section>\n  );\n}\n\nexport default AboutProject;\n","import './NavTab.scss';\n\nfunction NavTab() {\n  return (\n    <nav className=\"navtab\">\n      <ul className=\"navtab__links\">\n        <li className=\"navtab__link-container\">\n          <a className=\"navtab__link\" href=\"#about\">\n            О проекте\n          </a>\n        </li>\n        <li className=\"navtab__link-container\">\n          <a className=\"navtab__link\" href=\"#techs\">\n            Технологии\n          </a>\n        </li>\n        <li className=\"navtab__link-container\">\n          <a className=\"navtab__link\" href=\"#student\">\n            Студент\n          </a>\n        </li>\n      </ul>\n    </nav>\n  );\n}\n\nexport default NavTab;\n","import { EXTERNAL_LINK_PROPS } from '../../../utils/constants';\n\nimport './Portfolio.scss';\n\nconst baseUrl = 'https://artginzburg-learning.github.io/';\nconst folio = [\n  {\n    name: 'Статичный сайт',\n    path: 'how-to-learn',\n  },\n  {\n    name: 'Адаптивный сайт',\n    path: 'russian-travel',\n  },\n  {\n    name: 'Одностраничное приложение',\n    path: 'react-mesto-auth',\n  },\n];\n\nexport default function Portfolio() {\n  return (\n    <section className=\"portfolio\" id=\"portfolio\">\n      <h2 className=\"portfolio__title\">Портфолио</h2>\n      <ul className=\"portfolio__links\">\n        {folio.map((project, index) => (\n          <li className=\"portfolio__links-item\" key={index}>\n            <a\n              className=\"portfolio__link\"\n              href={`${baseUrl}${project.path}/`}\n              {...EXTERNAL_LINK_PROPS}\n            >\n              {project.name}\n            </a>\n          </li>\n        ))}\n      </ul>\n    </section>\n  );\n}\n","import './Promo.scss';\n\nfunction Promo() {\n  return (\n    <section className=\"promo\">\n      <h1 className=\"promo__title\">Учебный проект студента факультета Веб-разработки.</h1>\n    </section>\n  );\n}\n\nexport default Promo;\n","import { EXTERNAL_LINK_PROPS } from '../../../utils/constants';\n\nimport './Techs.scss';\n\nconst technologies = [\n  ['HTML'],\n  ['CSS'],\n  ['JS', 'javascript'],\n  ['React'],\n  ['Git'],\n  ['Express.js', 'express'],\n  ['mongoDB'],\n];\n\nfunction Techs() {\n  return (\n    <section className=\"techs\" id=\"techs\">\n      <h2 className=\"techs__title\">Технологии</h2>\n      <article className=\"techs__content\">\n        <h3 className=\"techs__heading\">7 технологий</h3>\n        <p className=\"techs__text\">\n          На курсе веб-разработки мы освоили технологии, которые применили в дипломном проекте.\n        </p>\n        <ul className=\"techs__list\">\n          {technologies.map((item, index) => (\n            <li className=\"techs__list-item\" key={index}>\n              <a\n                className=\"techs__list-link\"\n                href={`https://github.com/topics/${(item[1] ?? item[0]).toLowerCase()}`}\n                {...EXTERNAL_LINK_PROPS}\n              >\n                {item[0]}\n              </a>\n            </li>\n          ))}\n        </ul>\n      </article>\n    </section>\n  );\n}\n\nexport default Techs;\n","import { useTitle } from '../../hooks/useTitle';\n\nimport Footer from '../Footer';\nimport Header from '../Header';\n\nimport AboutMe from './AboutMe';\nimport AboutProject from './AboutProject';\nimport NavTab from './NavTab';\nimport Portfolio from './Portfolio';\nimport Promo from './Promo';\nimport Techs from './Techs';\n\nimport './Main.scss';\n\nfunction Main({ loggedIn }) {\n  useTitle('О проекте');\n\n  return (\n    <>\n      <Header className=\"main__header\" loggedIn={loggedIn} />\n      <main>\n        <Promo />\n        <NavTab />\n        <AboutProject />\n        <Techs />\n        <AboutMe />\n        <Portfolio />\n      </main>\n      <Footer />\n    </>\n  );\n}\n\nexport default Main;\n","import Api from './Api';\nimport { API_DOMAIN } from './constants';\n\nclass MoviesApi extends Api {\n  getAllMovies() {\n    return this._customFetch('');\n  }\n}\n\nexport default new MoviesApi({ baseUrl: `https://${API_DOMAIN}/beatfilm-movies` });\n","import { API_DOMAIN, EXTERNAL_LINK_PROPS, MOVIES_CONFIG } from '../../../utils/constants';\nimport { classNames } from '../../../utils/toClassNames';\nimport { declOfNum } from '../../../utils/declOfNum';\n\nimport './MoviesCard.scss';\n\nfunction durationDeclension(duration) {\n  return `${duration} ${declOfNum(duration, ['минута', 'минуты', 'минут'])}`;\n}\n\nexport default function MoviesCard({ card, isSaved, type, ...props }) {\n  const typeIsDefault = type === MOVIES_CONFIG.defaultType;\n\n  const buttonClassNames = ['moviescard__button', `moviescard__button_type_${type}`];\n\n  const name = card.nameRU || card.nameEN;\n\n  function handleSaveOrDeleteClick() {\n    isSaved ? props.onCardDelete(card) : props.onCardSave(card);\n  }\n\n  return (\n    <li className=\"moviescard\">\n      <a\n        className=\"moviescard__link\"\n        href={typeIsDefault ? card.trailerLink : card.trailer}\n        {...EXTERNAL_LINK_PROPS}\n      >\n        <figure className=\"moviescard__figure\">\n          <div className=\"moviescard__text-container\">\n            <figcaption className=\"moviescard__title\">{name}</figcaption>\n            <p className=\"moviescard__duration\">{durationDeclension(card.duration)}</p>\n          </div>\n\n          <img\n            className=\"moviescard__image\"\n            src={typeIsDefault ? `https://${API_DOMAIN}${card.image.url}` : card.image}\n            alt={name}\n          />\n        </figure>\n      </a>\n\n      <input\n        type=\"checkbox\"\n        checked={typeIsDefault ? isSaved : !isSaved}\n        onChange={handleSaveOrDeleteClick}\n        {...classNames(buttonClassNames)}\n      />\n    </li>\n  );\n}\n","export function declOfNum(number, words) {\n  return words[\n    number % 100 > 4 && number % 100 < 20\n      ? 2\n      : [2, 0, 1, 1, 1, 2][number % 10 < 5 ? Math.abs(number) % 10 : 5]\n  ];\n}\n","import { useCallback, useState } from 'react';\n\nimport { useWindowSize } from '../../../hooks/useWindowSize';\nimport { useTimeoutLimitedEffect } from '../../../hooks/useTimeoutLimitedEffect';\n\nimport { MOVIES_CONFIG } from '../../../utils/constants';\n\nimport MoviesCard from '../MoviesCard';\n\nimport './MoviesCardList.scss';\n\nconst breakpoints = {\n  mobile: 480,\n  tablet: 768,\n  desktop: 1280,\n};\n\nconst layoutConfig = {\n  [breakpoints.desktop]: {\n    cardsPerRow: 3,\n    initialRows: 4,\n    addRowsOnDemand: 1,\n  },\n  [breakpoints.tablet]: {\n    cardsPerRow: 2,\n    initialRows: 4,\n    addRowsOnDemand: 1,\n  },\n  [breakpoints.mobile]: {\n    cardsPerRow: 1,\n    initialRows: 5,\n    addRowsOnDemand: 2,\n  },\n};\n\nfunction getAppropriateLayout(currentWidth) {\n  if (currentWidth >= breakpoints.desktop) {\n    return layoutConfig[breakpoints.desktop];\n  }\n  if (currentWidth >= breakpoints.tablet) {\n    return layoutConfig[breakpoints.tablet];\n  }\n  return layoutConfig[breakpoints.mobile];\n}\n\nexport default function MoviesCardList({ cards, savedCards, type, ...props }) {\n  const typeIsDefault = type === MOVIES_CONFIG.defaultType;\n\n  const cardsToDisplay = typeIsDefault ? cards : savedCards;\n\n  const [cardsLimited, setCardsLimited] = useState([]);\n\n  const [cardsOnDemand, setCardsOnDemand] = useState(0);\n\n  const [windowWidth] = useWindowSize();\n\n  function displayMoreCards() {\n    setCardsLimited(cardsToDisplay.slice(0, cardsLimited.length + cardsOnDemand));\n  }\n\n  const layoutCards = useCallback(() => {\n    const appropriateLayout = getAppropriateLayout(windowWidth);\n\n    const initialCardsQuantity = appropriateLayout.cardsPerRow * appropriateLayout.initialRows;\n\n    setCardsOnDemand(appropriateLayout.addRowsOnDemand * appropriateLayout.cardsPerRow);\n\n    if (!cardsLimited.length) {\n      return setCardsLimited(cardsToDisplay.slice(0, initialCardsQuantity));\n    }\n\n    setCardsLimited(cardsToDisplay.slice(0, cardsLimited.length));\n  }, [cardsLimited.length, cardsToDisplay, windowWidth]);\n\n  useTimeoutLimitedEffect(layoutCards);\n\n  return (\n    <section className=\"moviescards\">\n      <ul className=\"moviescards__list\">\n        {cardsLimited.map((card) => (\n          <MoviesCard\n            {...props}\n            card={card}\n            isSaved={!typeIsDefault || savedCards.some((c) => c.movieId === String(card.id))}\n            type={type}\n            key={(typeIsDefault ? card.id : card.movieId) ?? Math.random()}\n          />\n        ))}\n      </ul>\n      {cardsLimited.length < cardsToDisplay.length && (\n        <button className=\"moviescards__more\" type=\"button\" onClick={displayMoreCards}>\n          Ещё\n        </button>\n      )}\n    </section>\n  );\n}\n","import { useLayoutEffect, useState } from 'react';\n\nexport function useWindowSize() {\n  const [size, setSize] = useState([0, 0]);\n\n  function updateSize() {\n    setSize([window.innerWidth, window.innerHeight]);\n  }\n\n  useLayoutEffect(() => {\n    window.addEventListener('resize', updateSize);\n    updateSize();\n\n    return () => {\n      window.removeEventListener('resize', updateSize);\n    };\n  }, []);\n\n  return size;\n}\n","import { useEffect, useRef } from 'react';\n\nexport function useTimeoutLimitedEffect(reactCallback, timeout = 200) {\n  const limiter = useRef();\n\n  useEffect(() => {\n    clearTimeout(limiter.current);\n\n    limiter.current = setTimeout(reactCallback, timeout);\n  }, [reactCallback, timeout]);\n}\n","import './Preloader.scss';\n\nconst Preloader = () => (\n  <div className=\"preloader\">\n    <div className=\"preloader__container\">\n      <span className=\"preloader__round\" />\n    </div>\n  </div>\n);\n\nexport default Preloader;\n","import { MOVIES_CONFIG } from '../../../utils/constants';\n\nimport './SearchForm.scss';\n\nexport default function SearchForm({ updateQuery, filterShortState, queryState }) {\n  const [filterShort, setFilterShort] = filterShortState;\n  const [query] = queryState;\n\n  function toggleFilterShort() {\n    setFilterShort(!filterShort);\n  }\n\n  return (\n    <section className=\"searchform\">\n      <form onSubmit={updateQuery} className=\"searchform__form\">\n        <fieldset className=\"searchform__fieldset\">\n          <label className=\"searchform__fieldset-container\">\n            <input\n              onBlur={updateQuery}\n              defaultValue={query}\n              name=\"search\"\n              className=\"searchform__input\"\n              type=\"search\"\n              placeholder=\"Фильм\"\n            />\n            <button className=\"searchform__submit\" type=\"submit\" />\n          </label>\n        </fieldset>\n        <label\n          title={`Длительность <= ${MOVIES_CONFIG.shortDuration}`}\n          className=\"searchform__label\"\n        >\n          <input\n            checked={filterShort}\n            onChange={toggleFilterShort}\n            className=\"searchform__switch\"\n            type=\"checkbox\"\n          />\n          Короткометражки\n        </label>\n      </form>\n    </section>\n  );\n}\n","import { useEffect, useState } from 'react';\n\nimport { useCurrentUser } from '../../contexts/CurrentUserContext';\n\nimport useStateWithLocalStorage from '../../hooks/useStateWithLocalStorage';\nimport { useTitle } from '../../hooks/useTitle';\n\nimport { PATHNAMES, MOVIES_CONFIG } from '../../utils/constants';\nimport moviesApi from '../../utils/MoviesApi';\n\nimport Footer from '../Footer';\nimport Header from '../Header';\n\nimport MoviesCardList from './MoviesCardList';\nimport Preloader from './Preloader';\nimport SearchForm from './SearchForm';\n\nimport './Movies.scss';\n\nexport default function Movies({\n  savedCards = [],\n  type = MOVIES_CONFIG.defaultType,\n  loggedIn,\n  ...props\n}) {\n  const typeIsDefault = type === MOVIES_CONFIG.defaultType;\n\n  useTitle(typeIsDefault ? PATHNAMES.search.title : PATHNAMES.saved.title);\n\n  const currentUser = useCurrentUser();\n\n  const filterShortState = useState(false);\n  const queryState = useStateWithLocalStorage('query', '');\n\n  const [query, setQuery] = queryState;\n  const filterShort = filterShortState[0];\n\n  const [cards, setCards] = useStateWithLocalStorage('cards', []);\n  const [lastCardsFetch, setLastCardsFetch] = useStateWithLocalStorage('lastCardsFetch', 0);\n\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const cardsAreOutdated = (Date.now() - lastCardsFetch) / (1000 * 60 * 60 * 24) >= 1;\n\n  useEffect(() => {\n    if (query && (cardsAreOutdated || !cards.length)) {\n      moviesApi\n        .getAllMovies()\n        .then((newCards) => {\n          setCards(newCards);\n          setLastCardsFetch(Date.now());\n          setErrorMessage('');\n        })\n        .catch((err) => {\n          setErrorMessage(\n            cards.length\n              ? 'Обновить список фильмов не удалось, но поиск по сохранённому списку возможен.'\n              : 'Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз',\n          );\n          console.log('Couldnt get initial cards from the server', err);\n        });\n    }\n  }, [setCards, query, lastCardsFetch, setLastCardsFetch, cardsAreOutdated, cards]);\n\n  const personalSavedCards = savedCards.filter(\n    (card) => !card.owner || (card.owner._id ?? card.owner) === currentUser._id,\n  );\n\n  const filterShortIfNeeded = (card) =>\n    !filterShort || card.duration <= MOVIES_CONFIG.shortDuration;\n  const filterSearch = (card) =>\n    !query ||\n    card.nameRU?.toLowerCase().includes(query.toLowerCase()) ||\n    card.nameEN?.toLowerCase().includes(query.toLowerCase());\n\n  const filteredCards = cards.filter(filterShortIfNeeded).filter(filterSearch);\n  const filteredSavedCards = personalSavedCards.filter(filterShortIfNeeded).filter(filterSearch);\n\n  const nothingFound =\n    query && (typeIsDefault ? !filteredCards.length : !filteredSavedCards.length);\n\n  function updateQuery(e) {\n    e.preventDefault();\n\n    const newQuery = e.target.value ?? e.target.search.value;\n\n    if (!newQuery) {\n      setErrorMessage('Нужно ввести ключевое слово');\n      return;\n    }\n\n    setErrorMessage('');\n    setQuery(newQuery);\n  }\n\n  return (\n    <>\n      <Header loggedIn={loggedIn} />\n      <main>\n        <SearchForm\n          updateQuery={updateQuery}\n          filterShortState={filterShortState}\n          queryState={queryState}\n        />\n        {nothingFound ? (\n          <p className=\"movies__status\">Ничего не найдено</p>\n        ) : !query && typeIsDefault ? null : cards.length ? (\n          <MoviesCardList\n            {...props}\n            query={query}\n            type={type}\n            cards={filteredCards}\n            savedCards={filteredSavedCards}\n          />\n        ) : (\n          <Preloader />\n        )}\n        {errorMessage && <p className=\"movies__status movies__status_type_error\">{errorMessage}</p>}\n      </main>\n      <Footer />\n    </>\n  );\n}\n","import { Link } from 'react-router-dom';\nimport { PATHS } from '../../utils/constants';\n\nimport './NotFound.scss';\n\nexport default function NotFound() {\n  return (\n    <main className=\"notfound\">\n      <h1 className=\"notfound__title\">404</h1>\n      <h2 className=\"notfound__subtitle\">Страница не найдена</h2>\n      <nav className=\"notfound__navigation\">\n        <Link to={PATHS.main} className=\"notfound__link\">\n          Назад\n        </Link>\n      </nav>\n    </main>\n  );\n}\n","import { useState } from 'react';\n\nimport {\n  sendApiUpdate,\n  useCurrentUser,\n  useCurrentUserDispatcher,\n} from '../../contexts/CurrentUserContext';\n\nimport { useTitle } from '../../hooks/useTitle';\nimport useValidatedForm from '../../hooks/useValidatedForm';\n\nimport { FORM_CLASSES, PATTERNS } from '../../utils/constants';\nimport { classNames } from '../../utils/toClassNames';\n\nimport Header from '../Header';\nimport Form from '../Form';\nimport FormInput from '../FormInput';\n\nimport './Profile.scss';\n\nconst propsForInputs = {\n  autoCorrect: 'off',\n  spellCheck: false,\n  className: `${FORM_CLASSES.inputClass}_theme_dark profile__details-text`,\n};\n\nexport default function Profile({ loggedIn, ...props }) {\n  useTitle('Профиль');\n\n  const [status, setStatus] = useState('');\n\n  const currentUser = useCurrentUser();\n  const setCurrentUser = useCurrentUserDispatcher();\n\n  const form = useValidatedForm(currentUser);\n\n  const [buttonIsSaving, setButtonIsSaving] = useState(false);\n  const buttonTitle = buttonIsSaving ? 'Сохранение...' : 'Редактировать';\n\n  async function handleSubmit(e) {\n    setButtonIsSaving(true);\n\n    return await sendApiUpdate(setCurrentUser, currentUser, form.getData(), 'updateUserInfo')\n      .then(() => {\n        form.setIsInvalid(true);\n        setStatus('');\n        setTimeout(() => {\n          setStatus('Изменения сохранены.');\n        });\n        e.target.reset();\n      })\n      .catch((err) => {\n        setStatus('');\n        setTimeout(() => {\n          err.message\n            ? setStatus(\n                err.message +\n                  (err.validation?.body?.message ? ` — ${err.validation.body.message}` : ''),\n              )\n            : console.log(err);\n        });\n      })\n      .finally(() => {\n        form.setIsInvalid(true);\n        setButtonIsSaving(false);\n      });\n  }\n\n  return (\n    <>\n      <Header loggedIn={loggedIn} />\n      <main>\n        <Form className=\"profile\" onSubmit={handleSubmit} onReset={form.reset}>\n          <h2 className=\"profile__title\">Привет, {currentUser.name}!</h2>\n\n          <div className=\"profile__details\">\n            <label className=\"profile__details-item\">\n              <p className=\"profile__details-heading\">Имя</p>\n              <div className=\"profile__input-container\">\n                <FormInput\n                  {...propsForInputs}\n                  autoComplete=\"name\"\n                  {...form.register('name')}\n                  placeholder=\"Арт Гинзбург\"\n                  disabled={buttonIsSaving}\n                />\n              </div>\n            </label>\n\n            <label className=\"profile__details-item\">\n              <p className=\"profile__details-heading\">E-mail</p>\n              <div className=\"profile__input-container\">\n                <FormInput\n                  {...propsForInputs}\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  {...form.register('email')}\n                  pattern={PATTERNS.email}\n                  placeholder=\"art.ginzburg@ya.ru\"\n                  disabled={buttonIsSaving}\n                />\n              </div>\n            </label>\n          </div>\n\n          <p {...classNames(['profile__status', status && 'profile__status_visible'])}>{status}</p>\n\n          <div className=\"profile__buttons\">\n            <button\n              type=\"submit\"\n              disabled={form.isInvalid || buttonIsSaving}\n              className=\"profile__button\"\n            >\n              {buttonTitle}\n            </button>\n            <button\n              onClick={props.handleSignOut}\n              type=\"button\"\n              className=\"profile__button profile__button_type_dangerous\"\n            >\n              Выйти из аккаунта\n            </button>\n          </div>\n        </Form>\n      </main>\n    </>\n  );\n}\n","import { Route, Redirect } from 'react-router-dom';\n\nimport { PATHS } from '../utils/constants';\n\nconst ProtectedRoute = (props) => (\n  <Route path={props.path}>{props.loggedIn ? props.children : <Redirect to={PATHS.main} />}</Route>\n);\nexport default ProtectedRoute;\n","import { useCallback, useEffect } from 'react';\n\nimport { Route, Switch, useHistory } from 'react-router-dom';\n\nimport { API_DOMAIN, PATHS } from '../utils/constants';\nimport { scrollToTop } from '../utils/scrollToTop';\n\nimport mainApi from '../utils/MainApi';\n\nimport useStateWithLocalStorage from '../hooks/useStateWithLocalStorage';\nimport useStateWithBase64 from '../hooks/useStateWithBase64';\n\nimport { CurrentUserProvider, defaultUserState } from '../contexts/CurrentUserContext';\n\nimport Authentication from './Authentication';\nimport Main from './Main';\nimport Movies from './Movies';\nimport NotFound from './NotFound';\nimport Profile from './Profile';\nimport ProtectedRoute from './ProtectedRoute';\n\nfunction App() {\n  const history = useHistory();\n\n  const [currentUser, setCurrentUser] = useStateWithLocalStorage('currentUser', defaultUserState);\n\n  const [loggedIn, setLoggedIn] = useStateWithLocalStorage('loggedIn', false);\n  const setEmail = useStateWithBase64('email', '')[1];\n\n  const [savedCards, setSavedCards] = useStateWithLocalStorage('savedCards', []);\n\n  useEffect(() => {\n    if (loggedIn) {\n      mainApi\n        .getUserInfo()\n        .then(setCurrentUser)\n        .catch((err) => console.log('Couldnt get user info from the server', err));\n      mainApi\n        .getMovies()\n        .then(setSavedCards)\n        .catch((err) => console.log('Couldnt get saved cards from the server', err));\n    }\n  }, [loggedIn, setCurrentUser, setSavedCards]);\n\n  const handleCardDelete = useCallback(\n    (card) => {\n      const oldSavedCards = savedCards;\n\n      const cardToDelete = card.id ? savedCards.find((c) => c.movieId === String(card.id)) : card;\n\n      setSavedCards(\n        savedCards.filter((c) => (card.id ? c.movieId !== String(card.id) : c._id !== card._id)),\n      );\n\n      return mainApi.deleteMovie(cardToDelete._id).catch((error) => {\n        setSavedCards(oldSavedCards);\n        console.log('Couldnt delete card on the server', error);\n      });\n    },\n    [savedCards, setSavedCards],\n  );\n\n  async function handleCardSave(card) {\n    const oldSavedCards = savedCards;\n\n    const cardToSave = {\n      country: card.country,\n      director: card.director,\n      duration: card.duration,\n      year: card.year,\n      description: card.description,\n      image: `https://${API_DOMAIN}${card.image.url}`,\n      trailer: card.trailerLink,\n      thumbnail: `https://${API_DOMAIN}${card.image.formats.thumbnail.url}`,\n      movieId: String(card.id),\n      nameRU: card.nameRU,\n      nameEN: card.nameEN,\n    };\n\n    setSavedCards([cardToSave, ...savedCards]);\n\n    try {\n      const newCard = await mainApi.saveMovie(cardToSave);\n      setSavedCards([newCard, ...savedCards]);\n      return newCard;\n    } catch (error) {\n      setSavedCards(oldSavedCards);\n      console.error(error);\n    }\n  }\n\n  const handleLogin = useCallback(\n    (email) => {\n      setEmail(email);\n      setLoggedIn(true);\n    },\n    [setEmail, setLoggedIn],\n  );\n\n  const handleTokenCheck = useCallback(() => {\n    mainApi\n      .getUserInfo()\n      .then((res) => {\n        if (res) {\n          handleLogin(res.email);\n        }\n      })\n      .catch((err) => {\n        setLoggedIn(false);\n\n        console.log(err);\n      });\n  }, [handleLogin, setLoggedIn]);\n\n  function handleSubmitRegister(e, email, password, name) {\n    return mainApi.register(email, password, name).then(() => {\n      handleSubmitLogin(e, email, password);\n    });\n  }\n\n  function handleSubmitLogin(e, email, password) {\n    if (!email || !password) {\n      return;\n    }\n\n    return mainApi.login(email, password).then((data) => {\n      if (data) {\n        e.target.reset();\n\n        handleLogin(email);\n        history.push(PATHS.search);\n      }\n    });\n  }\n\n  function handleSignOut() {\n    mainApi\n      .logout()\n      .then(() => {\n        setLoggedIn(false);\n        history.replace(PATHS.main);\n        delete localStorage.query;\n        scrollToTop();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  useEffect(() => {\n    handleTokenCheck();\n  }, [handleTokenCheck]);\n\n  return (\n    <CurrentUserProvider state={currentUser} dispatch={setCurrentUser}>\n      <Switch>\n        <Route exact path={PATHS.main}>\n          <Main loggedIn={loggedIn} />\n        </Route>\n        <Route path={[PATHS.register, PATHS.login]}>\n          <Authentication\n            loggedIn={loggedIn}\n            handleLogin={handleSubmitLogin}\n            handleRegister={handleSubmitRegister}\n          />\n        </Route>\n        <ProtectedRoute path={PATHS.search} loggedIn={loggedIn}>\n          <Movies\n            onCardSave={handleCardSave}\n            onCardDelete={handleCardDelete}\n            savedCards={savedCards}\n            loggedIn={loggedIn}\n          />\n        </ProtectedRoute>\n        <ProtectedRoute path={PATHS.saved} loggedIn={loggedIn}>\n          <Movies\n            onCardSave={handleCardSave}\n            onCardDelete={handleCardDelete}\n            savedCards={savedCards}\n            type=\"remove\"\n            loggedIn={loggedIn}\n          />\n        </ProtectedRoute>\n        <ProtectedRoute path={PATHS.account} loggedIn={loggedIn}>\n          <Profile handleSignOut={handleSignOut} loggedIn={loggedIn} />\n        </ProtectedRoute>\n        <Route component={NotFound} />\n      </Switch>\n    </CurrentUserProvider>\n  );\n}\n\nexport default App;\n","export function scrollToTop() {\n  window.scrollTo(0, 0);\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router basename={process.env.PUBLIC_URL}>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function to log results (for example: reportWebVitals(console.log)) or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}